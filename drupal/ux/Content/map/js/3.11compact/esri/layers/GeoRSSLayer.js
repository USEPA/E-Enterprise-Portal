// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.11/esri/copyright.txt for details.
//>>built
require({cache:{"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(h,q,f,k,g,b){h=k("dijit._OnDijitClickMixin",null,{connect:function(f,c,r){return this.inherited(arguments,[f,"ondijitclick"==c?b:c,r])}});h.a11yclick=b;return h})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(h,q,f,k,g,b,m){var c={_isElementShown:function(c){var a=
k.get(c);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=f.get(c,"type")},hasDefaultTabStop:function(c){switch(c.nodeName.toLowerCase()){case "a":return f.has(c,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var a;try{var b=c.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;a=b.body}catch(m){try{a=c.contentWindow.document.body}catch(C){return!1}}return a&&("true"==a.contentEditable||
a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==c.contentEditable}},effectiveTabIndex:function(b){return f.get(b,"disabled")?void 0:f.has(b,"tabIndex")?+f.get(b,"tabIndex"):c.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=c.effectiveTabIndex(b)},isFocusable:function(b){return-1<=c.effectiveTabIndex(b)},_getTabNavigable:function(r){function a(d){return d&&"input"==d.tagName.toLowerCase()&&d.type&&"radio"==d.type.toLowerCase()&&d.name&&d.name.toLowerCase()}
var s,m,C,q,k,v,d={},E=c._isElementShown,w=c.effectiveTabIndex,l=function(n){for(n=n.firstChild;n;n=n.nextSibling)if(!(1!=n.nodeType||9>=b("ie")&&"HTML"!==n.scopeName||!E(n))){var e=w(n);if(0<=e){if(0==e)s||(s=n),m=n;else if(0<e){if(!C||e<q)q=e,C=n;if(!k||e>=v)v=e,k=n}e=a(n);f.get(n,"checked")&&e&&(d[e]=n)}"SELECT"!=n.nodeName.toUpperCase()&&l(n)}};E(r)&&l(r);return{first:d[a(s)]||s,last:d[a(m)]||m,lowest:d[a(C)]||C,highest:d[a(k)]||k}},getFirstInTabbingOrder:function(b,a){var f=c._getTabNavigable(q.byId(b,
a));return f.lowest?f.lowest:f.first},getLastInTabbingOrder:function(b,a){var f=c._getTabNavigable(q.byId(b,a));return f.last?f.last:f.highest}};g.mixin(m,c);return c})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(h,q,f,k){function g(c){if((c.keyCode===h.ENTER||c.keyCode===h.SPACE)&&!/input|button|textarea/i.test(c.target.nodeName))for(c=c.target;c;c=c.parentNode)if(c.dojoClick)return!0}var b;f(document,"keydown",function(c){g(c)?(b=c.target,c.preventDefault()):
b=null});f(document,"keyup",function(c){g(c)&&c.target==b&&(b=null,f.emit(c.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,metaKey:c.metaKey,altKey:c.altKey,_origType:c.type}))});var m=function(c,b){c.dojoClick=!0;return f(c,"click",b)};m.click=m;m.press=function(c,b){var a=f(c,k.press,function(a){("mousedown"!=a.type||q.isLeft(a))&&b(a)}),s=f(c,"keydown",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){a.remove();s.remove()}}};
m.release=function(c,b){var a=f(c,k.release,function(a){("mouseup"!=a.type||q.isLeft(a))&&b(a)}),s=f(c,"keyup",function(a){(a.keyCode===h.ENTER||a.keyCode===h.SPACE)&&b(a)});return{remove:function(){a.remove();s.remove()}}};m.move=k.move;return m})},"esri/layers/ServiceGeneratedFeatureCollection":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style dojo/has ../kernel ../SpatialReference ../geometry/Extent ../geometry/webMercatorUtils ../renderers/SimpleRenderer ./layer ./FeatureLayer ../dijit/PopupTemplate".split(" "),
function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z){h=h([C],{declaredClass:"esri.layers._ServiceGeneratedFeatureCollection",constructor:function(a,d){this.pointSymbol=d&&d.pointSymbol;this.polylineSymbol=d&&d.polylineSymbol;this.polygonSymbol=d&&d.polygonSymbol;this._outSR=d&&(d.outSpatialReference||d.outSR)||new r({wkid:4326});this._options=f.mixin({},d)},parse:function(){console.error("parse function has not been implemented")},getFeatureLayers:function(){var a=[];this._fLayers&&(a=a.concat(this._fLayers));
return a},onRefresh:function(){},onOpacityChange:function(){},refresh:function(){this.loaded&&(this._map&&!this._io&&this.visible)&&this._createLayer()},_createLayer:function(a){var d=this;this._fireUpdateStart();a=this.parse(a);a.addCallback(function(a){d._io=null;d._initLayer(a)});a.addErrback(function(a){d._io=null;a=f.mixin(Error(),a);a.message="Unable to load resource: "+d.url+" "+(a.message||"");d._fireUpdateEnd(a);d.onError(a)})},_initLayer:function(b){this.loaded&&this._removeInternalLayers();
this.name=b.name;this.description=b.description;this.snippet=b.snippet;this.defaultVisibility=void 0!==b.visibility?this.visible=!!b.visibility:this.visible=!0;this.featureInfos=b.featureInfos;this.fullExtent=this.initialExtent=new a(b.lookAtExtent);this.copyright=b.author||b.copyright;var d;if((b=f.getObject("featureCollection.layers",!1,b))&&0<b.length)this._fLayers=[],k.forEach(b,function(a,b){var c=f.getObject("featureSet.features",!1,a);c&&0<c.length&&(d=f.mixin({outFields:["*"],infoTemplate:a.popupInfo?
new z(a.popupInfo):null,editable:!1},this._options),d.id&&(d.id=d.id+"_"+b),a.layerDefinition.capabilities="Query,Data",c=new y(a,d),c.geometryType&&(this["_"+c.geometryType]=c),this._fLayers.push(c))},this),0===this._fLayers.length&&delete this._fLayers;this.items=[];this._esriGeometryPoint&&(this.items=this.items.concat(this._esriGeometryPoint.graphics),this.pointSymbol&&(b=new x(this.pointSymbol),this._esriGeometryPoint.setRenderer(b)));this._esriGeometryPolyline&&(this.items=this.items.concat(this._esriGeometryPolyline.graphics),
this.polylineSymbol&&(b=new x(this.polylineSymbol),this._esriGeometryPolyline.setRenderer(b)));this._esriGeometryPolygon&&(this.items=this.items.concat(this._esriGeometryPolygon.graphics),this.polygonSymbol&&(b=new x(this.polygonSymbol),this._esriGeometryPolygon.setRenderer(b)));this._fireUpdateEnd();this.loaded&&(this._addInternalLayers(),this.onRefresh())},_addInternalLayers:function(){var a=this._map;this._fireUpdateStart();var d=a.spatialReference,b=this._outSR,c;if(d.wkid)c=d._isWebMercator()&&
b._isWebMercator()||d.wkid===b.wkid;else if(d.wkt)c=d.wkt===b.wkt;else{console.log("_setMap - map has invalid spatial reference");return}if(!c)if(d._isWebMercator()&&4326===b.wkid)this._converter=s.geographicToWebMercator;else if(b._isWebMercator()&&4326===d.wkid)this._converter=s.webMercatorToGeographic;else{console.log("_setMap - unsupported workflow. Spatial reference of the map and layer do not match, and the conversion cannot be done on the client.");return}(d=this._fLayers)&&0<d.length&&k.forEach(d,
function(d){if(this._converter){var b=d.graphics,e,c,D=b?b.length:0;for(e=0;e<D;e++)(c=b[e].geometry)&&b[e].setGeometry(this._converter(c))}a.addLayer(d)},this);this.setVisibility(this.visible);this._fireUpdateEnd()},_removeInternalLayers:function(){var a=this._map;a&&k.forEach(this.getFeatureLayers(),a.removeLayer,a)},setScaleRange:function(a,d){this.inherited(arguments);k.forEach(this.getFeatureLayers(),function(b){b.setScaleRange(a,d)});this._options.minScale=this.minScale;this._options.maxScale=
this.maxScale},setOpacity:function(a){this.opacity!=a&&(k.forEach(this.getFeatureLayers(),function(d){d.setOpacity(a)}),this.opacity=this._options.opacity=a,this.onOpacityChange(a))},onVisibilityChange:function(a){this._fireUpdateStart();k.forEach(this.getFeatureLayers(),function(d){d.setVisibility(a)});this._fireUpdateEnd()},_setMap:function(a,d){this.inherited(arguments);this._map=a;var c=this._div=g.create("div",null,d);b.set(c,"position","absolute");this._addInternalLayers();this.evaluateSuspension();
return c},_unsetMap:function(a,d){this._io&&this._io.cancel();q.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var b=this._div;b&&(d.removeChild(b),g.destroy(b));this._div=null;this.inherited(arguments)}});m("extend-esri")&&f.setObject("layers._ServiceGeneratedFeatureCollection",h,c);return h})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(h,q,f,k,g,b,
m,c,r,a){function s(a,e,t){return z&&t?function(a,e){return b(a,t,e)}:d?function(t,d){var u=b(t,e,function(a){d.call(this,a);p=(new Date).getTime()}),c=b(t,a,function(a){(!p||(new Date).getTime()>p+1E3)&&d.call(this,a)});return{remove:function(){u.remove();c.remove()}}}:function(e,t){return b(e,a,t)}}function x(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function C(d,p,u){var c=x(d.target);if(w=!d.target.disabled&&c&&c.dojoClick)if(n=(l="useTarget"==w)?c:d.target,l&&d.preventDefault(),
e=d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX,B=d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY,D=("object"==typeof w?w.x:"number"==typeof w?w:0)||4,A=("object"==typeof w?w.y:"number"==typeof w?w:0)||4,!E){E=!0;var s=function(d){w=l?f.isDescendant(a.doc.elementFromPoint(d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX,d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY),n):w&&(d.changedTouches?d.changedTouches[0].target:
d.target)==n&&Math.abs((d.changedTouches?d.changedTouches[0].pageX-a.global.pageXOffset:d.clientX)-e)<=D&&Math.abs((d.changedTouches?d.changedTouches[0].pageY-a.global.pageYOffset:d.clientY)-B)<=A};a.doc.addEventListener(p,function(a){s(a);l&&a.preventDefault()},!0);a.doc.addEventListener(u,function(a){s(a);if(w){t=(new Date).getTime();var d=l?n:a.target;"LABEL"===d.tagName&&(d=f.byId(d.getAttribute("for"))||d);var e=a.changedTouches?a.changedTouches[0]:a,p=document.createEvent("MouseEvents");p._dojo_click=
!0;p.initMouseEvent("click",!0,!0,a.view,a.detail,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);setTimeout(function(){b.emit(d,"click",p);t=(new Date).getTime()},0)}},!0);d=function(d){a.doc.addEventListener(d,function(a){!a._dojo_click&&((new Date).getTime()<=t+1E3&&!("INPUT"==a.target.tagName&&k.contains(a.target,"dijitOffScreen")))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==d&&(("INPUT"!=a.target.tagName||"radio"==
a.target.type||"checkbox"==a.target.type)&&"TEXTAREA"!=a.target.tagName&&"AUDIO"!=a.target.tagName&&"VIDEO"!=a.target.tagName)&&a.preventDefault())},!0)};d("click");d("mousedown");d("mouseup")}}var y=5>m("ios"),z=m("pointer-events")||m("MSPointer"),v=function(){var a={},d;for(d in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[d]=m("MSPointer")?"MSPointer"+d.charAt(0).toUpperCase()+d.slice(1):"pointer"+d;return a}(),d=m("touch-events"),E,w,l=!1,n,e,B,D,A,t,p,u;z?r(function(){a.doc.addEventListener(v.down,
function(a){C(a,v.move,v.up)},!0)}):d&&r(function(){function d(a){var e=g.delegate(a,{bubbles:!0});6<=m("ios")&&(e.touches=a.touches,e.altKey=a.altKey,e.changedTouches=a.changedTouches,e.ctrlKey=a.ctrlKey,e.metaKey=a.metaKey,e.shiftKey=a.shiftKey,e.targetTouches=a.targetTouches);return e}u=a.body();a.doc.addEventListener("touchstart",function(a){p=(new Date).getTime();var d=u;u=a.target;b.emit(d,"dojotouchout",{relatedTarget:u,bubbles:!0});b.emit(u,"dojotouchover",{relatedTarget:d,bubbles:!0});C(a,
"touchmove","touchend")},!0);b(a.doc,"touchmove",function(e){p=(new Date).getTime();var t=a.doc.elementFromPoint(e.pageX-(y?0:a.global.pageXOffset),e.pageY-(y?0:a.global.pageYOffset));t&&(u!==t&&(b.emit(u,"dojotouchout",{relatedTarget:t,bubbles:!0}),b.emit(t,"dojotouchover",{relatedTarget:u,bubbles:!0}),u=t),b.emit(t,"dojotouchmove",d(e))||e.preventDefault())});b(a.doc,"touchend",function(e){p=(new Date).getTime();var t=a.doc.elementFromPoint(e.pageX-(y?0:a.global.pageXOffset),e.pageY-(y?0:a.global.pageYOffset))||
a.body();b.emit(t,"dojotouchend",d(e))})});q={press:s("mousedown","touchstart",v.down),move:s("mousemove","dojotouchmove",v.move),release:s("mouseup","dojotouchend",v.up),cancel:s(c.leave,"touchcancel",z?v.cancel:null),over:s("mouseover","dojotouchover",v.over),out:s("mouseout","dojotouchout",v.out),enter:c._eventHandler(s("mouseover","dojotouchover",v.over)),leave:c._eventHandler(s("mouseout","dojotouchout",v.out))};return h.touch=q})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),
function(h,q,f,k,g,b,m,c,r){var a=g.delegate(c,{mouseenter:b.enter,mouseleave:b.leave,keypress:f._keypress}),s;f=k("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||
this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var f=!0,s=this.attachScope||this,d=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(d)for(var E=d.split(/\s*,\s*/);d=E.shift();)g.isArray(s[d])?s[d].push(a):s[d]=a,f="containerNode"!=d,this._attachPoints.push(d);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){d=b.split(/\s*,\s*/);for(E=g.trim;b=d.shift();)if(b){var w=
null;-1!=b.indexOf(":")?(w=b.split(":"),b=E(w[0]),w=E(w[1])):b=E(b);w||(w=b);this._attachEvents.push(c(a,b,g.hitch(s,w)))}}return f},_attach:function(b,c,f){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?s||(s=h("./a11yclick")):a[c]||c;return m(b,c,f)},_detachTemplateNodes:function(){var a=this.attachScope||this;q.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];q.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});g.extend(r,{dojoAttachEvent:"",dojoAttachPoint:""});return f})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all ./lang ./kernel ./request ./tasks/query ./tasks/QueryTask ./tasks/StatisticDefinition dojo/i18n!dojo/cldr/nls/number".split(" "),function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z,v){h=h(null,{declaredClass:"esri.PopupInfo",initialize:function(a,b){if(a){q.mixin(this,
b);this.info=a;this.title=this.getTitle;this.content=this.getContent;var c=this._fieldLabels={},l=this._fieldsMap={};a.fieldInfos&&f.forEach(a.fieldInfos,function(a){c[a.fieldName]=a.label;l[a.fieldName]=a});this._relatedFieldPrefix="relationships/";this.titleHasRelatedFields=!!(a.title&&-1!==a.title.indexOf("{"+this._relatedFieldPrefix))}},toJson:function(){return k.fromJson(k.toJson(this.info))},getTitle:function(){},getContent:function(){},getComponents:function(a){var b=this.info,c=new m,l,n;
b.fieldInfos&&(n=f.filter(b.fieldInfos,function(a){return-1!==a.fieldName.indexOf(this._relatedFieldPrefix)},this));n&&0<n.length&&(l=this._getRelatedRecords({graphic:a,fieldsInfo:n}));l?l.always(q.hitch(this,function(){c.resolve(this._getPopupValues(a))})):c.resolve(this._getPopupValues(a));return c.promise},_getPopupValues:function(d,b){var c=this.info,l=d.getLayer(),n=q.clone(d.attributes)||{},e=q.clone(n),B=c.fieldInfos,D="",A="",t,p,u,s,m,r=l&&l._getDateOpts&&l._getDateOpts().properties,k={dateFormat:{properties:r,
formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(this._relatedInfo)for(s in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(s)){var h=this._relatedInfo[s],g=this._relatedLayersInfo[s];h&&(f.forEach(h.relatedFeatures,function(a){for(m in a.attributes)if(a.attributes.hasOwnProperty(m)&&"esriRelCardinalityOneToOne"===g.relation.cardinality){var d=this._toRelatedFieldName([g.relation.id,m]);n[d]=e[d]=a.attributes[m]}},this),f.forEach(h.relatedStatsFeatures,function(a){for(m in a.attributes)if(a.attributes.hasOwnProperty(m)){var d=
this._toRelatedFieldName([g.relation.id,m]);n[d]=e[d]=a.attributes[m]}},this))}B&&f.forEach(B,function(a){p=a.fieldName;e[p]=this._formatValue(e[p],p,k);r&&(a.format&&a.format.dateFormat)&&(a=f.indexOf(r,p),-1<a&&r.splice(a,1))},this);if(l){s=l.types;var v=(h=l.typeIdField)&&n[h];for(p in n)if(n.hasOwnProperty(p)&&-1===p.indexOf(this._relatedFieldPrefix)&&(u=n[p],a.isDefined(u))){var y=this._getDomainName(l,s,v,p,u);a.isDefined(y)?e[p]=y:p===h&&(y=this._getTypeName(l,u),a.isDefined(y)&&(e[p]=y))}}c.title&&
(D=this._processFieldsInLinks(this._fixTokens(c.title),n),D=q.trim(a.substitute(e,D,k)||""));if(b)return{title:D};c.description&&(A=this._processFieldsInLinks(this._fixTokens(c.description),n),A=q.trim(a.substitute(e,A,k)||""));B&&(t=[],f.forEach(B,function(d){(p=d.fieldName)&&d.visible&&t.push([d.label||p,a.substitute(e,"${"+p+"}",k)||""])}));var C,x;c.mediaInfos&&(C=[],f.forEach(c.mediaInfos,function(d){x=0;u=d.value;switch(d.type){case "image":var b=u.sourceURL,b=b&&q.trim(a.substitute(n,this._fixTokens(b)));
x=!!b;break;case "piechart":case "linechart":case "columnchart":case "barchart":x=f.some(u.fields,function(d){return a.isDefined(n[d])||-1!==d.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(x){d=q.clone(d);u=d.value;var b=d.title?this._processFieldsInLinks(this._fixTokens(d.title),n):"",t=d.caption?this._processFieldsInLinks(this._fixTokens(d.caption),n):"";d.title=b?q.trim(a.substitute(e,b,k)||""):"";d.caption=t?q.trim(a.substitute(e,t,k)||""):"";if("image"===
d.type)u.sourceURL=a.substitute(n,this._fixTokens(u.sourceURL)),u.linkURL&&(u.linkURL=q.trim(a.substitute(n,this._fixTokens(u.linkURL))||""));else{var p,c;f.forEach(u.fields,function(a,d){if(-1!==a.indexOf(this._relatedFieldPrefix))c=this._getRelatedChartInfos(a,u,n,k),c instanceof Array?u.fields=c:u.fields[d]=c;else{var e=n[a],e=void 0===e?null:e;p=n[u.normalizeField]||0;e&&p&&(e/=p);u.fields[d]={y:e,tooltip:(this._fieldLabels[a]||a)+":\x3cbr/\x3e"+this._formatValue(e,a,k,!!p)}}},this)}C.push(d)}},
this));return{title:D,description:A,fields:t&&t.length?t:null,mediaInfos:C&&C.length?C:null,formatted:e,editSummary:l&&l.getEditSummary?l.getEditSummary(d):""}},_getRelatedChartInfos:function(a,b,c,l){var n,e,B,D,A,t;n=[];t=this._fromRelatedFieldName(a);A=t[0];e=this._relatedInfo[A];A=this._relatedLayersInfo[A];e&&f.forEach(e.relatedFeatures,function(e){e=e.attributes;var u,A;for(A in e)if(e.hasOwnProperty(A)&&A===t[1]){u={};D=e[A];b.normalizeField&&(B=-1!==b.normalizeField.indexOf(this._relatedFieldPrefix)?
e[this._fromRelatedFieldName(b.normalizeField)[1]]:c[b.normalizeField]);D&&B&&(D/=B);if(b.tooltipField)if(-1!==b.tooltipField.indexOf(this._relatedFieldPrefix)){var f=this._fromRelatedFieldName(b.tooltipField)[1];u.tooltip=e[f]+":\x3cbr/\x3e"+this._formatValue(D,e[f],l,!!B)}else u.tooltip=(this._fieldLabels[a]||a)+":\x3cbr/\x3e"+this._formatValue(D,b.tooltipField,l,!!B);else u.tooltip=D;u.y=D;n.push(u)}},this);return"esriRelCardinalityOneToMany"===A.relation.cardinality||"esriRelCardinalityManyToMany"===
A.relation.cardinality?n:n[0]},getAttachments:function(a){var b=a.getLayer();a=a.attributes;if(this.info.showAttachments&&(b&&b.hasAttachments&&b.objectIdField)&&(a=a&&a[b.objectIdField]))return b.queryAttachmentInfos(a)},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",
shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",
shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_reHref:/href\s*=\s*\"[^\"]+\"/ig,_fixTokens:function(a){return a.replace(/(\{[^\{\r\n]+\})/g,"$$$1")},_processFieldsInLinks:function(d,b){return d&&
d.replace(this._reHref,function(d){return d=a.substitute(b,d)})},_formatValue:function(d,b,c,l){var n=this._fieldsMap[b],e=n&&n.format;b="number"===typeof d&&-1===f.indexOf(c.dateFormat.properties,b)&&(!e||!e.dateFormat);if(!a.isDefined(d)||!n||!a.isDefined(e))return b?this._forceLTR(d):d;var B="",D=[],n=e.hasOwnProperty("places")||e.hasOwnProperty("digitSeparator"),A=e.hasOwnProperty("digitSeparator")?e.digitSeparator:!0;if(n)B="NumberFormat",D.push("places: "+(a.isDefined(e.places)&&(!l||0<e.places)?
Number(e.places):"Infinity")),D.length&&(B+="("+D.join(",")+")");else if(e.dateFormat)B="DateFormat"+this._insertOffset(this._dateFormats[e.dateFormat]||this._dateFormats.shortDateShortTime);else return b?this._forceLTR(d):d;d=a.substitute({myKey:d},"${myKey:"+B+"}",c)||"";n&&!A&&v.group&&(d=d.replace(RegExp("\\"+v.group,"g"),""));return b?this._forceLTR(d):d},_forceLTR:function(a){var b=c("ie");return b&&10>=b?a:"\x3cspan class\x3d'esriNumericValue'\x3e"+a+"\x3c/span\x3e"},_insertOffset:function(d){d&&
(d=a.isDefined(this.utcOffset)?d.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):d);return d},_getDomainName:function(d,b,c,l,n){var e,B;b&&a.isDefined(c)&&f.some(b,function(a){if(a.id==c){if((e=a.domains&&a.domains[l])&&"inherited"===e.type)e=this._getLayerDomain(d,l),B=!0;return!0}return!1},this);!B&&!e&&(e=this._getLayerDomain(d,l));if(e&&e.codedValues){var D;f.some(e.codedValues,function(a){return a.code==n?(D=a.name,!0):!1});return D}},_getLayerDomain:function(a,b){var c=a.fields;if(c){var l;
f.some(c,function(a){return a.name===b?(l=a.domain,!0):!1});return l}},_getTypeName:function(a,b){var c=a.types;if(c){var l;f.some(c,function(a){return a.id==b?(l=a.name,!0):!1});return l}},_getRelatedRecords:function(a){var b=a.graphic,c=new m,f;this._relatedLayersInfo?this._queryRelatedLayers(b).then(q.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),q.hitch(this,this._handlerErrorResponse,c)):this._getRelatedLayersInfo(a).then(q.hitch(this,function(a){for(f in a)a.hasOwnProperty(f)&&
a[f]&&(this._relatedLayersInfo[f].relatedLayerInfo=a[f]);this._queryRelatedLayers(b).then(q.hitch(this,function(a){this._setRelatedRecords(b,a);c.resolve(a)}),q.hitch(this,this._handlerErrorResponse,c))}),q.hitch(this,this._handlerErrorResponse,c));return c.promise},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,c,l,n={};c=a.graphic.getLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});f.forEach(b,function(a){var b,d,A,t;b=this._fromRelatedFieldName(a.fieldName);d=b[0];b=b[1];d&&
(this._relatedLayersInfo[d]||(f.some(c.relationships,function(a){if(a.id==d)return t=a,!0}),t&&(this._relatedLayersInfo[d]={relation:t,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[d]&&(this._relatedLayersInfo[d].relatedFields.push(b),a.statisticType&&(A=new z,A.statisticType=a.statisticType,A.onStatisticField=b,A.outStatisticFieldName=b,this._relatedLayersInfo[d].outStatistics.push(A))))},this);for(l in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(l)&&this._relatedLayersInfo[l]&&
(a=this._relatedLayersInfo[l].relation,a=c.url.replace(/[0-9]+$/,a.relatedTableId),this._relatedLayersInfo[l].relatedLayerUrl=a,n[l]=x({url:a,content:{f:"json"},callbackParamName:"callback"}));return r(n)},_queryRelatedLayers:function(a){var b={},c;for(c in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(c)&&(b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]}));return r(b)},_queryRelatedLayer:function(a){var b,c,l,n,e,B,D,A,t,p;b=a.graphic;c=b.getLayer().url.match(/[0-9]+$/g)[0];
A=a.relatedInfo;D=A.relatedLayerInfo;t=A.relatedLayerUrl;p=A.relation;f.some(D.relationships,function(a){if(a.relatedTableId===parseInt(c,10))return l=a,!0},this);l&&(a=new C,f.some(D.fields,function(a){if(a.name===l.keyField)return e=-1!==f.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],a.type)?"number":"string",!0}),n="string"===e?l.keyField+"\x3d'"+b.attributes[p.keyField]+"'":l.keyField+"\x3d"+b.attributes[p.keyField],a.where=n,a.outFields=
A.relatedFields,A.outStatistics&&(0<A.outStatistics.length&&D.supportsStatistics)&&(B=new C,B.where=a.where,B.outFields=a.outFields,B.outStatistics=A.outStatistics),b=new y(t),n=[],n.push(b.execute(a)),B&&n.push(b.execute(B)));return r(n)},_setRelatedRecords:function(b,c){this._relatedInfo=[];for(var f in c)if(c.hasOwnProperty(f)&&c[f]){var l=c[f];this._relatedInfo[f]={};this._relatedInfo[f].relatedFeatures=l[0].features;a.isDefined(l[1])&&(this._relatedInfo[f].relatedStatsFeatures=l[1].features)}},
_handlerErrorResponse:function(a,b){a.reject(b)},_fromRelatedFieldName:function(a){var b=[];-1!==a.indexOf(this._relatedFieldPrefix)&&(a=a.split("/"),b=a.slice(1));return b},_toRelatedFieldName:function(a){var b="";a&&0<a.length&&(b=this._relatedFieldPrefix+a[0]+"/"+a[1]);return b}});b("extend-esri")&&(s.PopupInfo=s.PopupInfoTemplate=h);return h})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),
function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z,v,d){var E,w,l=new (q([x,m],{curNode:null,activeStack:[],constructor:function(){var a=c.hitch(this,function(a){f.isDescendant(this.curNode,a)&&this.set("curNode",null);f.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});h.before(b,"empty",a);h.before(b,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,b){var c=this,d=a.document&&a.document.body;if(d){var t=s("pointer-events")?"pointerdown":s("MSPointer")?
"MSPointerDown":s("touch-events")?"mousedown, touchstart":"mousedown",p=r(a.document,t,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(b||a.target,"mouse")}),u=r(d,"focusin",function(a){if(a.target.tagName){var d=a.target.tagName.toLowerCase();"#document"==d||"body"==d||(z.isFocusable(a.target)?c._onFocusNode(b||a.target):c._onTouchNode(b||a.target))}}),f=r(d,"focusout",function(a){c._onBlurNode(b||a.target)});return{remove:function(){p.remove();u.remove();f.remove();d=p=
u=f=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<E+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(c.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<w+100||(this._clearActiveWidgetsTimer=setTimeout(c.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){w=(new Date).getTime();
this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);g.contains(a,"dijitPopup")&&(a=a.firstChild);var c=[];try{for(;a;){var d=k.get(a,"dijitPopupParent");if(d)a=v.byId(d).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===C.body())break;a=y.get(a.ownerDocument).frameElement}else{var t=a.getAttribute&&a.getAttribute("widgetId"),p=t&&v.byId(t);p&&!("mouse"==b&&p.get("disabled"))&&c.unshift(t);a=a.parentNode}}}catch(u){}this._setStack(c,
b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(E=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack,d=c.length-1,t=a.length-1;if(a[t]!=c[d]){this.set("activeStack",a);var p;for(p=d;0<=p&&c[p]!=a[p];p--)if(d=v.byId(c[p]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),
this.emit("widget-blur",d,b);for(p++;p<=t;p++)if(d=v.byId(a[p]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)}},focus:function(a){if(a)try{a.focus()}catch(b){}}}));a(function(){var a=l.registerWin(y.get(document));s("ie")&&r(window,"unload",function(){a&&(a.remove(),a=null)})});d.focus=function(a){l.focus(a)};for(var n in l)/^_/.test(n)||(d.focus[n]="function"==typeof l[n]?c.hitch(l,n):l[n]);l.watch(function(a,b,c){d.focus[a]=c});return l})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(h,q,f,k,g,b){return h([b,g],{_onMap:function(b){var c=this.constructor._onMap,f;if(!c||!c.FINAL)delete this.constructor._onMap,c=this.registerConnectEvents(),c.FINAL=!0;b=b.toLowerCase();c[b]?f=this[c[b].method]:(b=this._onCamelCase(b),this[b]&&(f=b));return f},on:function(b,c){var f=this._onMap(b),a=b.replace(/\-/g,""),s="on"+a in this.domNode;return f||!s?this.inherited(arguments):this.own(k(this.domNode,a,c))[0]},emit:function(b,c,f){var a,s,k,h=b.toLowerCase(),g=this.constructor._onMap||
this.registerConnectEvents();s=this[this._onMap(h)];c=c||{};c.target||(c.target=this);s&&(g&&g[h])&&(this._onObj2Arr(function(){a=Array.prototype.slice.call(arguments)},g[h].argKeys)(c),k=q.mixin({},arguments),k[2]=a,k[0]=g[h].name.replace(/^on/,""));return this.inherited(k||arguments)}})})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z,v){function d(a){return eval("("+a+")")}function E(a){var b=a._nameCaseMap,d=a.prototype;if(!b||b._extendCnt<l){var b=a._nameCaseMap={},c;for(c in d)"_"!==c.charAt(0)&&(b[c.toLowerCase()]=c);b._extendCnt=l}return b}function w(a,b){var d=a.join();if(!n[d]){for(var c=[],p=0,e=a.length;p<e;p++){var l=a[p];c[c.length]=n[l]=n[l]||f.getObject(l)||~l.indexOf("/")&&(b?b(l):h(l))}p=c.shift();n[d]=c.length?p.createSubclass?p.createSubclass(c):p.extend.apply(p,c):p}return n[d]}
new Date("X");var l=0;r.after(f,"extend",function(){l++},!0);var n={},e={_clearCache:function(){l++;n={}},_functionFromScript:function(a,b){var d="",c="",p=a.getAttribute(b+"args")||a.getAttribute("args"),e=a.getAttribute("with"),p=(p||"").split(/\s*,\s*/);e&&e.length&&k.forEach(e.split(/\s*,\s*/),function(a){d+="with("+a+"){";c+="}"});return new Function(p,d+a.innerHTML+c)},instantiate:function(a,b,d){b=b||{};d=d||{};var c=(d.scope||q._scopeName)+"Type",p="data-"+(d.scope||q._scopeName)+"-",e=p+
"type",f=p+"mixins",n=[];k.forEach(a,function(a){var d=c in b?b[c]:a.getAttribute(e)||a.getAttribute(c);if(d){var p=a.getAttribute(f),d=p?[d].concat(p.split(/\s*,\s*/)):[d];n.push({node:a,types:d})}});return this._instantiate(n,b,d)},_instantiate:function(b,d,c,e){function p(a){!d._started&&!c.noStart&&k.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}b=k.map(b,function(a){var b=a.ctor||w(a.types,c.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(b,a.node,d,c,a.scripts,a.inherited)},this);return e?a(b).then(p):p(b)},construct:function(a,b,e,t,p,u){function n(a){L&&f.setObject(L,a);for(x=0;x<H.length;x++)r[H[x].advice||"after"](a,H[x].method,f.hitch(a,H[x].func),!0);for(x=0;x<M.length;x++)M[x].call(a);for(x=0;x<J.length;x++)a.watch(J[x].prop,J[x].func);for(x=0;x<K.length;x++)z(a,K[x].event,K[x].func);return a}var l=a&&a.prototype;t=t||{};var h={};t.defaults&&f.mixin(h,t.defaults);u&&f.mixin(h,u);var m;
C("dom-attributes-explicit")?m=b.attributes:C("dom-attributes-specified-flag")?m=k.filter(b.attributes,function(a){return a.specified}):(u=(/^input$|^img$/i.test(b.nodeName)?b:b.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),m=k.map(u.split(/\s+/),function(a){var d=a.toLowerCase();return{name:a,value:"LI"==b.nodeName&&"value"==a||"enctype"==d?b.getAttribute(d):b.getAttributeNode(d).value}}));var g=t.scope||q._scopeName;
u="data-"+g+"-";var v={};"dojo"!==g&&(v[u+"props"]="data-dojo-props",v[u+"type"]="data-dojo-type",v[u+"mixins"]="data-dojo-mixins",v[g+"type"]="dojoType",v[u+"id"]="data-dojo-id");for(var x=0,w,g=[],L,I;w=m[x++];){var F=w.name,G=F.toLowerCase();w=w.value;switch(v[G]||G){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":I=w;break;case "data-dojo-id":case "jsid":L=w;break;case "data-dojo-attach-point":case "dojoattachpoint":h.dojoAttachPoint=w;break;case "data-dojo-attach-event":case "dojoattachevent":h.dojoAttachEvent=
w;break;case "class":h["class"]=b.className;break;case "style":h.style=b.style&&b.style.cssText;break;default:if(F in l||(F=E(a)[G]||F),F in l)switch(typeof l[F]){case "string":h[F]=w;break;case "number":h[F]=w.length?Number(w):NaN;break;case "boolean":h[F]="false"!=w.toLowerCase();break;case "function":""===w||-1!=w.search(/[^\w\.]+/i)?h[F]=new Function(w):h[F]=f.getObject(w,!1)||new Function(w);g.push(F);break;default:G=l[F],h[F]=G&&"length"in G?w?w.split(/\s*,\s*/):[]:G instanceof Date?""==w?new Date(""):
"now"==w?new Date:s.fromISOString(w):G instanceof c?q.baseUrl+w:d(w)}else h[F]=w}}for(m=0;m<g.length;m++)v=g[m].toLowerCase(),b.removeAttribute(v),b[v]=null;if(I)try{I=d.call(t.propsThis,"{"+I+"}"),f.mixin(h,I)}catch(N){throw Error(N.toString()+" in data-dojo-props\x3d'"+I+"'");}f.mixin(h,e);p||(p=a&&(a._noScript||l._noScript)?[]:y("\x3e script[type^\x3d'dojo/']",b));var H=[],M=[],J=[],K=[];if(p)for(x=0;x<p.length;x++)v=p[x],b.removeChild(v),e=v.getAttribute(u+"event")||v.getAttribute("event"),t=
v.getAttribute(u+"prop"),I=v.getAttribute(u+"method"),g=v.getAttribute(u+"advice"),m=v.getAttribute("type"),v=this._functionFromScript(v,u),e?"dojo/connect"==m?H.push({method:e,func:v}):"dojo/on"==m?K.push({event:e,func:v}):h[e]=v:"dojo/aspect"==m?H.push({method:I,advice:g,func:v}):"dojo/watch"==m?J.push({prop:t,func:v}):M.push(v);a=(p=a.markupFactory||l.markupFactory)?p(h,b,a):new a(h,b);return a.then?a.then(n):n(a)},scan:function(a,b){function d(a){if(!a.inherited){a.inherited={};var b=a.node,c=
d(a.parent),b={dir:b.getAttribute("dir")||c.dir,lang:b.getAttribute("lang")||c.lang,textDir:b.getAttribute(m)||c.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var c=[],e=[],f={},n=(b.scope||q._scopeName)+"Type",l="data-"+(b.scope||q._scopeName)+"-",s=l+"type",m=l+"textdir",l=l+"mixins",r=a.firstChild,g=b.inherited;if(!g){var v=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&v(a.parentNode,b)},g={dir:v(a,"dir"),lang:v(a,"lang"),textDir:v(a,m)},y;for(y in g)g[y]||
delete g[y]}for(var g={inherited:g},z,E;;)if(r)if(1!=r.nodeType)r=r.nextSibling;else if(z&&"script"==r.nodeName.toLowerCase())(F=r.getAttribute("type"))&&/^dojo\/\w/i.test(F)&&z.push(r),r=r.nextSibling;else if(E)r=r.nextSibling;else{var F=r.getAttribute(s)||r.getAttribute(n);y=r.firstChild;if(!F&&(!y||3==y.nodeType&&!y.nextSibling))r=r.nextSibling;else{E=null;if(F){var G=r.getAttribute(l);z=G?[F].concat(G.split(/\s*,\s*/)):[F];try{E=w(z,b.contextRequire)}catch(N){}E||k.forEach(z,function(a){~a.indexOf("/")&&
!f[a]&&(f[a]=!0,e[e.length]=a)});G=E&&!E.prototype._noScript?[]:null;g={types:z,ctor:E,parent:g,node:r,scripts:G};g.inherited=d(g);c.push(g)}else g={node:r,scripts:z,parent:g};z=G;E=r.stopParser||E&&E.prototype.stopParser&&!b.template;r=y}}else{if(!g||!g.node)break;r=g.node.nextSibling;E=!1;g=g.parent;z=g.scripts}var H=new x;e.length?(C("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+e.join(", ")),(b.contextRequire||h)(e,function(){H.resolve(k.filter(c,function(a){if(!a.ctor)try{a.ctor=
w(a.types,b.contextRequire)}catch(d){}for(var c=a.parent;c&&!c.types;)c=c.parent;var e=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(e&&e.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))})):H.resolve(c);return H.promise},_require:function(a,b){var c=d("{"+a.innerHTML+"}"),e=[],p=[],u=new x,l=b&&b.contextRequire||h,n;for(n in c)e.push(n),p.push(c[n]);l(p,function(){for(var a=0;a<e.length;a++)f.setObject(e[a],arguments[a]);u.resolve(arguments)});
return u.promise},_scanAmd:function(a,b){var c=new x,d=c.promise;c.resolve(!0);var e=this;y("script[type\x3d'dojo/require']",a).forEach(function(a){d=d.then(function(){return e._require(a,b)});a.parentNode.removeChild(a)});return d},parse:function(a,c){var d;!c&&a&&a.rootNode?(c=a,d=c.rootNode):a&&f.isObject(a)&&!("nodeType"in a)?c=a:d=a;d=d?b.byId(d):m.body();c=c||{};var e=c.template?{template:!0}:{},p=[],u=this,l=this._scanAmd(d,c).then(function(){return u.scan(d,c)}).then(function(a){return u._instantiate(a,
e,c,!0)}).then(function(a){return p=p.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});f.mixin(p,l);return p}};q.parser=e;g.parseOnLoad&&v(100,e,"parse");return e})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,q,f){return f("dijit.Destroyable",null,{destroy:function(f){this._destroyed=!0},own:function(){var f=["destroyRecursive","destroy","remove"];h.forEach(arguments,function(g){function b(){c.remove();
h.forEach(r,function(a){a.remove()})}var m,c=q.before(this,"destroy",function(a){g[m](a)}),r=[];g.then?(m="cancel",g.then(b,b)):h.forEach(f,function(a){"function"===typeof g[a]&&(m||(m=a),r.push(q.after(g,a,b,!0)))})},this);return arguments}})})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(h,q,f,k,g){return f("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,
_beforeFillContent:function(){if(this.widgetsInTemplate){var b=this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);g.parse(b,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(k.hitch(this,function(b){this._startupWidgets=b;for(var c=0;c<b.length;c++)this._processTemplateNode(b[c],function(b,a){return b[a]},function(b,a,c){return a in
b?b.connect(b,a,c):b.on(a,c,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(b,f,c){return f(b,"dojoType")||f(b,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){h.forEach(this._startupWidgets,
function(b){b&&(!b._started&&b.startup)&&b.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(h,q,f,k,g,b,m,c){var r=q("dijit._TemplatedMixin",c,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return m.substitute(a,this,
function(a,f){"!"==f.charAt(0)&&(a=k.getObject(f.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+f);return null==a?"":"!"==f.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=h(this.templatePath,{sanitize:!0}));var a=r.getCachedTemplate(this.templateString,
this._skipNodeCache,this.ownerDocument),b;if(k.isString(a)){if(b=f.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});r._templateCache={};r.getCachedTemplate=function(a,b,c){var g=r._templateCache,h=a,k=g[h];
if(k){try{if(!k.ownerDocument||k.ownerDocument==(c||document))return k}catch(q){}f.destroy(k)}a=m.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[h]=a;b=f.toDom(a,c);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[h]=b};b("ie")&&g(window,"unload",function(){var a=r._templateCache,b;for(b in a){var c=a[b];"object"==typeof c&&f.destroy(c);delete a[b]}});return r})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(h){return h.cache})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/domReady","dojo/_base/window"],function(h,q,f,k){f(function(){q("highcontrast")&&h.add(k.body(),"dijit_a11y")});return q})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(h,q,f,k,g,b,m,c){h=h([b,m],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(b,a){q.mixin(this,a);this.initialize(b,
a)},getTitle:function(b){var a;this.info&&(a=this.titleHasRelatedFields?"":this._getPopupValues(b,!0).title);return a||""},getContent:function(b){return this.info?(new c({template:this,graphic:b,chartTheme:this.chartTheme},k.create("div"))).domNode:""}});f("extend-esri")&&q.setObject("dijit.PopupTemplate",h,g);return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(h,q,f,k,g,b,m){g.add("highcontrast",function(){var b=
m.doc.createElement("div");b.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(q.blankGif||h.toUrl("./resources/blank.gif"))+'");';m.body().appendChild(b);var f=k.getComputedStyle(b),a=f.backgroundImage,f=f.borderTopColor==f.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=g("ie")?b.outerHTML="":m.body().removeChild(b);return f});b(function(){g("highcontrast")&&f.add(m.body(),"dj_a11y")});return g})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(h,q,f,k,g,b,m){b.extend(h,{waiRole:"",waiState:""});return g("dijit._Templated",[q,f],{widgetsInTemplate:!1,constructor:function(){m.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(b,f){var a=this.inherited(arguments),g=f(b,"waiRole");g&&b.setAttribute("role",g);(g=f(b,"waiState"))&&k.forEach(g.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),b.setAttribute("aria-"+
a[0],a[1]))});return a}})})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(h,q,f,k){k.extend(q,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return f("dijit._FocusMixin",null,{_focusManager:h})})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(h,q,f,k,g,b,m,c,r,a,s,x,C){function y(){}function z(a){return function(b,c,g,l){return b&&"string"==typeof c&&b[c]==y?b.on(c.substring(2).toLowerCase(),m.hitch(g,l)):a.apply(f,arguments)}}h.around(f,"connect",z);b.connect&&h.around(b,"connect",z);h=k("dijit._Widget",[s,x,C],{onClick:y,onDblClick:y,onKeyDown:y,onKeyPress:y,onKeyUp:y,onMouseDown:y,onMouseMove:y,onMouseOut:y,onMouseOver:y,onMouseLeave:y,onMouseEnter:y,onMouseUp:y,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
y&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===y?f.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,c){b.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,c)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){b.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?c("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});g("dijit-legacy-requires")&&r(0,function(){require(["dijit/_base"])});
return h})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dijit/_Widget dijit/_Templated ../kernel ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z,v,d,E){var w=0;q=q([d,y,z],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=k.mixin({},
E.widgets.popup)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this.template.getComponents(this.graphic).then(k.hitch(this,this._handleComponentsSuccess),k.hitch(this,this._handleComponentsError))},destroy:function(){this._dfd&&this._dfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+
1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var c=this._mediaInfos,d=c.length,e=this.domNode,f=this._prevMedia,h=this._nextMedia;if(1<d){var k=0,t=0;g.forEach(c,function(a){"image"===a.type?k++:-1!==a.type.indexOf("chart")&&t++});k&&(a.set(this._imageCount,"innerHTML",k),b.query(".summary .image",e).removeClass("hidden"));t&&(a.set(this._chartCount,"innerHTML",t),b.query(".summary .chart",e).removeClass("hidden"))}else b.query(".summary",
e).addClass("hidden"),s.add(f,"hidden"),s.add(h,"hidden");c=this._mediaPtr;0===c?s.add(f,"hidden"):s.remove(f,"hidden");c===d-1?s.add(h,"hidden"):s.remove(h,"hidden");this._destroyFrame()},_displayMedia:function(){var c=this._mediaInfos[this._mediaPtr],d=c.title,e=c.caption,f=b.query(".mediaSection .hzLine",this.domNode)[0];a.set(this._mediaTitle,"innerHTML",d);s[d?"remove":"add"](this._mediaTitle,"hidden");a.set(this._mediaCaption,"innerHTML",e);s[e?"remove":"add"](this._mediaCaption,"hidden");s[d&&
e?"remove":"add"](f,"hidden");this._rid=null;if("image"===c.type)this._showImage(c.value);else{var g=this,d=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],e=c.value.theme||this.chartTheme;k.isString(e)&&(e=e.replace(/\./gi,"/"),-1===e.indexOf("/")&&(e="dojox/charting/themes/"+e));e||(e="./Rainbow");d.push(e);try{var m=this._rid=w++;h(d,function(a,b,d){m===g._rid&&(g._rid=null,g._showChart(c.type,c.value,a,b,d))})}catch(t){console.log("PopupRenderer: error loading modules")}}},_showImage:function(c){s.add(this._mediaFrame,
"image");var d=C.get(this._gallery,"height"),e="\x3cimg class\x3d'esriPopupMediaImage' src\x3d'"+c.sourceURL+"' /\x3e";c.linkURL&&(e="\x3ca target\x3d'_blank' href\x3d'"+c.linkURL+"'\x3e"+e+"\x3c/a\x3e");a.set(this._mediaFrame,"innerHTML",e);var g=b.query(".esriPopupMediaImage",this._mediaFrame)[0],h=this,k;k=f.connect(g,"onload",function(){f.disconnect(k);k=null;h._imageLoaded(g,d)})},_showChart:function(a,b,c,d,f){s.remove(this._mediaFrame,"image");c=this._chart=new c(x.create("div",{"class":"chart"},
this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});f&&c.setTheme(f);switch(a){case "piechart":c.addPlot("default",{type:"Pie",labels:!1});c.addSeries("Series A",b.fields);break;case "linechart":c.addPlot("default",{type:"Markers"});c.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});g.forEach(b.fields,function(a,b){a.x=b+1});c.addSeries("Series A",b.fields);break;case "columnchart":c.addPlot("default",{type:"Columns",
gap:3});c.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.addSeries("Series A",b.fields);break;case "barchart":c.addPlot("default",{type:"Bars",gap:3}),c.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),c.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),c.addSeries("Series A",b.fields)}this._action=new d(c);c.render()},_destroyFrame:function(){this._rid=null;this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),
this._action=null);a.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(a,b){var c=a.height;c<b&&(c=Math.round((b-c)/2),C.set(a,"marginTop",c+"px"))},_attListHandler:function(b,c){if(b===this._dfd){this._dfd=null;var d="";!(c instanceof Error)&&(c&&c.length)&&g.forEach(c,function(a){d+="\x3cli\x3e";d+="\x3ca href\x3d'"+a.url+"' target\x3d'_blank'\x3e"+(a.name||"[No name]")+"\x3c/a\x3e";d+="\x3c/li\x3e"});a.set(this._attachmentsList,"innerHTML",d||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},
_handleComponentsSuccess:function(c){if(c){var d=this.showTitle?c.title:"",e=c.description,f=c.fields,h=c.mediaInfos,m=this.domNode,t=this._nls,p=this.template,u=this.graphic;this._prevMedia.title=t.NLS_prevMedia;this._nextMedia.title=t.NLS_nextMedia;a.set(this._title,"innerHTML",d);d||s.add(this._title,"hidden");!e&&f&&(e="",g.forEach(f,function(a){e+="\x3ctr valign\x3d'top'\x3e";e+="\x3ctd class\x3d'attrName'\x3e"+a[0]+"\x3c/td\x3e";e+="\x3ctd class\x3d'attrValue'\x3e"+a[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,
"\x3ca target\x3d'_blank' href\x3d'$1' title\x3d'$1'\x3e"+t.NLS_moreInfo+"\x3c/a\x3e")+"\x3c/td\x3e";e+="\x3c/tr\x3e"}),e&&(e="\x3ctable class\x3d'attrTable' cellpadding\x3d'0px' cellspacing\x3d'0px'\x3e"+e+"\x3c/table\x3e"));a.set(this._description,"innerHTML",e);e||s.add(this._description,"hidden");b.query("a",this._description).forEach(function(b){a.set(b,"target","_blank")});d&&e?b.query(".mainSection .hzLine",m).removeClass("hidden"):d||e?b.query(".mainSection .hzLine",m).addClass("hidden"):
b.query(".mainSection",m).addClass("hidden");if(d=this._dfd=p.getAttachments(u))d.addBoth(k.hitch(this,this._attListHandler,d)),a.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+t.NLS_searching+"...\x3c/li\x3e"),b.query(".attachmentsSection",m).removeClass("hidden");h&&h.length&&(b.query(".mediaSection",m).removeClass("hidden"),r.setSelectable(this._mediaFrame,!1),this._mediaInfos=h,this._mediaPtr=0,this._updateUI(),this._displayMedia());c.editSummary&&(a.set(this._editSummary,"innerHTML",c.editSummary),
h&&h.length&&s.remove(this._mediaBreak,"hidden"),s.remove(this._editSummarySection,"hidden"))}},_handleComponentsError:function(a){console.log("PopupRenderer: error loading template",a)}});m("extend-esri")&&k.setObject("dijit._PopupRenderer",q,v);return q})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(h,q,f,k,g,b,m,c,r,a,s,x,C,y,z,v,d,E,w,l,n,e,B){function D(a){return function(b){c[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}C.add("dijit-legacy-requires",!y.isAsync);C.add("dojo-bidi",!1);C("dijit-legacy-requires")&&d(0,function(){h(["dijit/_base/manager"])});var A={};k=b("dijit._WidgetBase",[E,n],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:D("lang"),dir:"",_setDirAttr:D("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:k.blankGif||h.toUrl("dojo/resources/blank.gif"),_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var b=a.prototype,c=a._setterAttrs=[],a=a._onMap={},d;for(d in b.attributeMap)c.push(d);for(d in b)/^on/.test(d)&&(a[d.substring(2).toLowerCase()]=d),/^_set[A-Z](.*)Attr$/.test(d)&&(d=d.charAt(4).toLowerCase()+d.substr(5,
d.length-9),(!b.attributeMap||!(d in b.attributeMap))&&c.push(d))}},postscript:function(a,b){this.create(a,b)},create:function(a,b){this._introspect();this.srcNodeRef=m.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,z.mixin(this,a));this.postMixInProperties();this.id||(this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=l.body(this.ownerDocument);B.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var d=this.srcNodeRef;d&&(d.parentNode&&this.domNode!==d)&&(d.parentNode.replaceChild(this.domNode,d),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},b;for(b in this.params||{})a[b]=this._get(b);q.forEach(this.constructor._setterAttrs,
function(b){if(!(b in a)){var c=this._get(b);c&&this.set(b,c)}},this);for(b in a)this.set(b,a[b])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(q.map(a,function(a){return a+"Rtl"})));r.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,q.forEach(this.getChildren(),function(a){!a._started&&
(!a._destroyed&&z.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();q.forEach(this._connects,z.hitch(this,"disconnect"));q.forEach(this._supportingWidgets,b);this.domNode&&q.forEach(B.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);
B.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?c.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){q.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;z.isObject(a)?
x.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,d){d=3<=arguments.length?d:this.attributeMap[a];q.forEach(z.isArray(d)?d:[d],function(d){var e=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":z.isFunction(b)&&(b=z.hitch(this,b));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;e.tagName?c.set(e,d,b):e.set(d,b);break;case "innerText":e.innerHTML="";e.appendChild(this.ownerDocument.createTextNode(b));
break;case "innerHTML":e.innerHTML=b;break;case "class":r.replace(e,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this._get(a)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var d=this[c.s];if(z.isFunction(d))var e=d.apply(this,Array.prototype.slice.call(arguments,1));else{var d=this.focusNode&&!z.isFunction(this.focusNode)?"focusNode":"domNode",f=this[d]&&this[d].tagName,g;if(g=f)if(!(g=
A[f])){g=this[d];var h={},k;for(k in g)h[k.toLowerCase()]=!0;g=A[f]=h}k=g;c=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:k&&c.l in k&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?d:null;null!=c&&this._attrToDom(a,b,c);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",
g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;if(this._created&&!(c===b||c!==c&&b!==b))this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+a,{detail:{prevValue:c,newValue:b}})},_get:function(a){return this[a]},emit:function(a,b,c){b=b||{};void 0===b.bubbles&&(b.bubbles=!0);void 0===b.cancelable&&(b.cancelable=!0);b.detail||(b.detail={});b.detail.widget=this;var d,e=this["on"+a];e&&(d=e.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&
v.emit(this.domNode,a.toLowerCase(),b);return d},on:function(a,b){var c=this._onMap(a);return c?f.after(this,c,b,!0):this.own(v(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap={},d;for(d in b.prototype)/^on/.test(d)&&(c[d.replace(/^on/,"").toLowerCase()]=d)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?B.findWidgets(this.containerNode):
[]},getParent:function(){return B.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(g.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(w.subscribe(a,z.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:s.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=x.get(this.domNode,"display")},placeAt:function(b,c){var d=!b.tagName&&
B.byId(b);d&&d.addChild&&(!c||"number"===typeof c)?d.addChild(this,c):(d=d&&"domNode"in d?d.containerNode&&!/after|before|replace/.test(c||"")?d.containerNode:d.domNode:m.byId(b,this.ownerDocument),a.place(this.domNode,d,c),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,b){var c=setTimeout(z.hitch(this,function(){c&&(c=null,this._destroyed||z.hitch(this,a)())}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}});C("dojo-bidi")&&
k.extend(e);return k})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(h,q){var f={};h.setObject("dojo.date.stamp",f);f.fromISOString=function(h,g){f._isoRegExp||(f._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var b=f._isoRegExp.exec(h),m=null;if(b){b.shift();b[1]&&b[1]--;b[6]&&(b[6]*=1E3);g&&(g=new Date(g),q.forEach(q.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return g["get"+a]()}),function(a,c){b[c]=b[c]||a}));m=new Date(b[0]||1970,b[1]||0,b[2]||1,b[3]||0,b[4]||0,b[5]||0,b[6]||0);100>b[0]&&m.setFullYear(b[0]||1970);var c=0,r=b[7]&&b[7].charAt(0);"Z"!=r&&(c=60*(b[8]||0)+(Number(b[9])||0),"-"!=r&&(c*=-1));r&&(c-=m.getTimezoneOffset());c&&m.setTime(m.getTime()+6E4*c)}return m};f.toISOString=function(f,g){var b=function(a){return 10>a?"0"+a:a};g=g||{};var h=[],c=g.zulu?"getUTC":"get",r="";"time"!=g.selector&&(r=f[c+"FullYear"](),r=["0000".substr((r+
"").length)+r,b(f[c+"Month"]()+1),b(f[c+"Date"]())].join("-"));h.push(r);if("date"!=g.selector){r=[b(f[c+"Hours"]()),b(f[c+"Minutes"]()),b(f[c+"Seconds"]())].join(":");c=f[c+"Milliseconds"]();g.milliseconds&&(r+="."+(100>c?"0":"")+b(c));if(g.zulu)r+="Z";else if("time"!=g.selector)var c=f.getTimezoneOffset(),a=Math.abs(c),r=r+((0<c?"-":"+")+b(Math.floor(a/60))+":"+b(a%60));h.push(r)}return h.join("T")};return f})},"*noref":1}});
define("esri/layers/GeoRSSLayer","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../config ../request ./ServiceGeneratedFeatureCollection".split(" "),function(h,q,f,k,g,b,m,c){h=h([c],{declaredClass:"esri.layers.GeoRSSLayer",serviceUrl:location.protocol+"//utility.arcgis.com/sharing/rss",constructor:function(c,a){b.defaults.geoRSSService&&(this.serviceUrl=b.defaults.geoRSSService);this._createLayer()},parse:function(){return this._io=m({url:this.serviceUrl,content:{url:this.url,
refresh:this.loaded?!0:void 0,outSR:this._outSR?f.toJson(this._outSR.toJson()):void 0},callbackParamName:"callback"})},_initLayer:function(b){this.inherited(arguments);this.loaded||(this.loaded=!0,this.onLoad(this))}});k("extend-esri")&&q.setObject("layers.GeoRSSLayer",h,g);return h});