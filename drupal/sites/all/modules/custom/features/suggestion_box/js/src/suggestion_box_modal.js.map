{"version":3,"sources":["suggestion_box_modal.js"],"names":["$","Drupal","behaviors","suggestionBox","attach","context","settings","$form","$body","submit","remove","removeClass","on","focus","email","$emailInput","$excludeEmailCheckbox","change","this","is","val","trigger","text_max","html","keyup","text_length","length","text_remaining","jQuery"],"mappings":"CAAA,SAAWA,GACT,YAEAC,QAAOC,UAAUC,eACfC,OAAQ,SAASC,EAASC,GAIxB,GAAIC,GAAQP,EAAE,iCACVQ,EAAQR,EAAE,OAEdO,GAAME,OAAO,WACXT,EAAE,wBAAwBU,SAC1BF,EAAMG,YAAY,gBAGpBX,EAAE,iBAAiBY,GAAG,SAAU,WAC9BJ,EAAMG,YAAY,gBAIpBX,EAAE,yBAAyBa,OAI3B,IAAIC,GACAC,EAAcf,EAAE,yBAEhBgB,EAAwBhB,EAAE,gCAE9BgB,GAAsBC,OAAO,WACvBjB,EAAEkB,MAAMC,GAAG,aACbL,EAAQC,EAAYK,MACpBL,EAAYK,IAAI,KACPN,GACTC,EAAYK,IAAIN,KAIpBE,EAAsBK,QAAQ,SAE9B,IAAIC,GAAW,GACftB,GAAE,kBAAkBuB,KAAKD,EAAW,yBAEpCtB,EAAE,cAAcwB,MAAM,WACpB,GAAIC,GAAczB,EAAE,cAAcoB,MAAMM,OACpCC,EAAiBL,EAAWG,CAChCzB,GAAE,kBAAkBuB,KAAKI,EAAiB,8BAI/CC","file":"suggestion_box_modal.js","sourcesContent":["(function ($) {\r\n  \"use strict\";\r\n\r\n  Drupal.behaviors.suggestionBox = {\r\n    attach: function(context, settings) {\r\n\r\n      // handle form submission to clear status messages on submit\r\n      // this prevents duplicate status messages from appearing\r\n      var $form = $('div.ctools-modal-content form'),\r\n          $body = $('body');\r\n\r\n      $form.submit(function(){\r\n        $('div.messages--status').remove();\r\n        $body.removeClass('modal-open');\r\n      });\r\n      \r\n      $(\"#modalContent\").on(\"remove\", function () {\r\n        $body.removeClass('modal-open');\r\n      });\r\n\r\n      // focus modal\r\n      $('.ctools-modal-content').focus();\r\n      \r\n      // if exclude email is checked, clear the value in the email input form\r\n      // if unchecked, restore the value\r\n      var email;\r\n      var $emailInput = $('#suggestion-box-email');\r\n\r\n      var $excludeEmailCheckbox = $('#suggestion-box-exclude-email');\r\n\r\n      $excludeEmailCheckbox.change(function() {\r\n        if ($(this).is(':checked')) {\r\n          email = $emailInput.val();\r\n          $emailInput.val('');\r\n        } else if (email) {\r\n          $emailInput.val(email);\r\n        }\r\n      });\r\n\r\n      $excludeEmailCheckbox.trigger('change');\r\n      \r\n      var text_max = 800;\r\n      $('#message-count').html(text_max + ' characters remaining');\r\n\r\n      $('#edit-body').keyup(function() {\r\n        var text_length = $('#edit-body').val().length;\r\n        var text_remaining = text_max - text_length;\r\n        $('#message-count').html(text_remaining + ' characters remaining');\r\n      });\r\n    }\r\n  }\r\n})(jQuery);\r\n"]}