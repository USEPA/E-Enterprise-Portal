{"version":3,"sources":["test_harness.js"],"names":["$","createLocalTable","data","table","each","key","value","Tool","Description","Link","createStateTable","Resource","Topic","URL","TestAPIHarness","input_id","json_div_id","table_div_id","url_used_id","button_id","url","api_type","loadResults","parsed_data","$json_holder","$url_used_holder","$table_holder","ajax","Drupal","settings","basePath","method","dataType","success","parseJSON","html","str","length","JSON","stringify","undefined","append","text","failure","msg","console","log","this","$button","click","input","encodeURIComponent","val","document","ready","jQuery"],"mappings":"CAIC,SAASA,GA0EN,QAASC,GAAiBC,GACtB,GAGIC,GAAQ,uFAKZ,OAJAH,GAAEI,KAAKF,EAAM,SAASG,EAAKC,GACvBH,EAAQA,EAAQ,WAAaG,EAAMC,KAAO,YAAcD,EAAME,YAAc,YAAcF,EAAMG,KAAO,eAE3GN,GAAgB,mBAIpB,QAASO,GAAiBR,GACtB,GAAIC,GAAQ,mFAKZ,OAJAH,GAAEI,KAAKF,EAAM,SAASG,EAAKC,GACvBH,EAAQA,EAAQ,WAAaG,EAAMK,SAAW,YAAcL,EAAMM,MAAQ,YAAcN,EAAMO,IAAM,eAExGV,GAAgB,mBAxFpB,GAAIW,GAAiB,SAASC,EAAUC,EAAaC,EAAcC,EAAaC,EAAWC,EAAKC,GAwB3F,QAASC,GAAYF,GAClB,GAEKjB,GAEAoB,EAJDC,EAAexB,EAAE,IAAMgB,GACvBS,EAAmBzB,EAAE,IAAMkB,GAE1BQ,EAAgB1B,EAAE,IAAKiB,EAE5BjB,GAAE2B,MACEP,IAAKQ,OAAOC,SAASC,SAAW,eAChCC,OAAQ,MACR7B,MAAOkB,IAAKA,GACZY,SAAU,OACVC,QAAS,SAAS/B,GACdqB,EAAcvB,EAAEkC,UAAUhC,GAC1BsB,EAAaW,KAAK,GAClB,IAAIC,GAAM,EACiB,IAAvBb,EAAYc,OACZD,EAAM,mBAGU,OAAZf,GACJrB,EAAEI,KAAKmB,EAAa,SAAUlB,EAAKC,GAC/B8B,EAAME,KAAKC,UAAUjC,EAAOkC,OAAW,GACvChB,EAAaiB,OAAOL,EAAM,UAC1BX,EAAiBiB,KAAKtB,KAGtBjB,EADY,SAAZkB,EACQpB,EAAiBsB,GAGjBb,EAAiBa,GAEzBG,EAAcS,KAAKhC,IAInBqB,EAAaiB,OAAOlB,IAIhCoB,QAAS,SAASC,GACdC,QAAQC,IAAIF,MA9DxBG,KAAKC,QAAUhD,EAAE,IAAMmB,EAMvB4B,MAAKC,QAAQC,MAAM,WACf,GAAIC,EACY,QAAZ7B,GACA6B,EAAQC,mBAAmBnD,EAAE,IAAMe,GAAUqC,OAI7C9B,EAAY4B,KAGZA,EAAQlD,EAAE,IAAMe,GAAUqC,MAC1B9B,EAAY4B,MA0ExBlD,GAAEqD,UAAUC,MAAM,WACqB,GAAIxC,GAAe,gBAAiB,aAAc,cAAe,iBAAkB,gBAAiB,6EAA8E,SAClL,GAAIA,GAAe,gBAAiB,aAAc,cAAe,iBAAkB,gBAAiB,6EAA8E,YAS3NyC","file":"test_harness.js","sourcesContent":["/**\r\n * Created by bmatkin on 1/29/2016.\r\n */\r\n\r\n(function($) {\r\n\r\n\r\n    var TestAPIHarness = function(input_id, json_div_id, table_div_id, url_used_id, button_id, url, api_type){\r\n\r\n        this.$button = $('#' + button_id);\r\n\r\n\r\n        var initial_url = url;\r\n        var url_to_load;\r\n\r\n        this.$button.click(function () {\r\n            var input;\r\n            if (api_type != 'any') {\r\n                input = encodeURIComponent($('#' + input_id).val());\r\n               // if (input != '') {\r\n                //    url_to_load = initial_url + \"?args[0]=\" + input;\r\n                //}\r\n                loadResults(input);\r\n            }\r\n            else {\r\n                input = $('#' + input_id).val();\r\n                loadResults(input);\r\n            }\r\n        });\r\n\r\n\r\n         function loadResults(url) {\r\n            var $json_holder = $('#' + json_div_id);\r\n            var $url_used_holder = $('#' + url_used_id);\r\n             var table;\r\n             var $table_holder = $('#'+ table_div_id);\r\n             var parsed_data;\r\n            $.ajax({\r\n                url: Drupal.settings.basePath + 'rest_request',\r\n                method: \"GET\",\r\n                data: {url: url},\r\n                dataType: \"JSON\",\r\n                success: function(data) {\r\n                    parsed_data = $.parseJSON(data);\r\n                    $json_holder.html('');\r\n                    var str = '';\r\n                    if (parsed_data.length  == 0 ) {\r\n                        str = \"No results found\";\r\n                    }\r\n                    else {\r\n                        if (api_type != 'any') {\r\n                        $.each(parsed_data, function (key, value) {\r\n                            str = JSON.stringify(value, undefined, 4);\r\n                            $json_holder.append(str + '<br />');\r\n                            $url_used_holder.text(url);\r\n                        });\r\n                        if (api_type == 'local') {\r\n                            table = createLocalTable(parsed_data);\r\n                        }\r\n                        else  {\r\n                            table = createStateTable(parsed_data);\r\n                        }\r\n                            $table_holder.html(table);\r\n\r\n                        }\r\n                        else {\r\n                            $json_holder.append(parsed_data);\r\n                        }\r\n                    }\r\n                },\r\n                failure: function(msg) {\r\n                    console.log(msg);\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    function createLocalTable(data) {\r\n        var tool;\r\n        var description;\r\n        var link;\r\n        var table = '<table><thead><tr><th>Title</th><th>Description</th><th>Link</th></tr></thead><tbody>';\r\n        $.each(data, function(key, value) {\r\n            table = table + '<tr><td>' + value.Tool + '</td><td>' + value.Description + '</td><td>' + value.Link + '</td></tr>';\r\n        });\r\n        table = table + \"</tbody></table>\";\r\n        return table;\r\n    }\r\n\r\n    function createStateTable(data) {\r\n        var table = '<table><thead><tr><th>Resource</th><th>Topic</th><th>URL</th></tr></thead><tbody>';\r\n        $.each(data, function(key, value) {\r\n            table = table + '<tr><td>' + value.Resource + '</td><td>' + value.Topic + '</td><td>' + value.URL + '</td></tr>';\r\n        });\r\n        table = table + \"</tbody></table>\";\r\n        return table;\r\n    }\r\n\r\n\r\n    $(document).ready(function() {\r\n        var local_resources_test_harness = new TestAPIHarness('local_request', 'local_json', 'local_table', 'url_used_local', 'search_locals', 'https://eenterprise-dev-portal.apps.cloud.gov/api/1.1/local_resources.json', 'local');\r\n        var state_resources_test_harness = new TestAPIHarness('state_request', 'state_json', 'state_table', 'url_used_state', 'search_states', 'https://eenterprise-dev-portal.apps.cloud.gov/api/1.1/state_resources.json', 'state');\r\n\r\n    //    var test_harness = new TestAPIHarness('any_request', 'raw_output', 'no_table', 'url_custom', 'search_custom', '', 'any');\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n}(jQuery));\r\n"]}