var anchor_text="Back";var update_anchor_text="Saving changes";var still_updating=0;function updatingUserTopics(){still_updating++;var $anchor=$(".back-to-lgc-widget a");if($anchor.text()!=update_anchor_text){$anchor.addClass("disabled").html(update_anchor_text+'  <i class="fa fa-spinner fa-spin" aria-hidden="true"></i>')}}function handleError(error_message){console.log(error_message)}function saveTopic($checkbox){var tid=$checkbox.val();var title=$checkbox.prop("name");var $anchor=$(".back-to-lgc-widget a");$.ajax({url:"manage_my_topics/save_topic",data:{tid:tid},method:"POST",beforeSend:function(){updatingUserTopics()},success:function(response){console.log(tid,title,response,Drupal.settings.recommended_resources);if(Drupal.settings.recommended_resources.user_lgc_topics){Drupal.settings.recommended_resources.user_lgc_topics[tid]=title}still_updating--;response=$.parseJSON(response);var error=response.error;if(!error&&still_updating==0){$anchor.removeClass("disabled").text(anchor_text)}else{handleError(response.msg)}},failure:function(response){handleError(response)}})}function removeTopic($checkbox,from_unfollow){var tid;var title=$checkbox.prop("name");var $anchor=$(".back-to-lgc-widget a");if(from_unfollow){tid=$checkbox}else{tid=$checkbox.val()}$.ajax({url:"manage_my_topics/remove_topic",data:{tid:tid},method:"POST",beforeSend:function(){updatingUserTopics()},success:function(response){console.log(tid,title,response,Drupal.settings.recommended_resources);if(Drupal.settings.recommended_resources.user_lgc_topics){delete Drupal.settings.recommended_resources.user_lgc_topics[tid]}still_updating--;response=$.parseJSON(response);var error=response.error;if(!error&&still_updating==0){if(from_unfollow){showLGCResourcesView()}$anchor.removeClass("disabled").text(anchor_text)}else{handleError(response.msg)}},failure:function(response){handleError(response)}})}(function($){$(document).ready(function(){$("body").on("click","#manage-my-topics .term-name-checkboxes, #manage-my-topics-wrapper .term-name-checkboxes",function(){var $checkbox=$(this);if($checkbox.prop("checked"))saveTopic($checkbox);else removeTopic($checkbox)})})})(jQuery);
//# sourceMappingURL=src/manage_my_topics_component.js.map