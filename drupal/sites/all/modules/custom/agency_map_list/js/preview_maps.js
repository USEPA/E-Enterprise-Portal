!function(a){function b(b,d){a.ajax({type:"GET",url:b+"/sharing/rest/search",async:!0,data:{q:"orgid:"+d+' -type:"Code Attachment" -type:"Featured Items" -type:"Symbol Set" -type:"Color Set" -type:"Windows Viewer Add In" -type:"Windows Viewer Configuration" (type:"Web Mapping Application" OR type:"Mobile Application")',f:"json",num:"100"},success:function(d,e,f){var g=JSON.parse(d),h=c(g,b);a("<h2>").append(a("<table/>").append(a("<tr/>").append(a("<td/>").append("<h2>Qualified Maps ("+h[0].childElementCount+")</h2>").attr("style","width: 50%").append("<div>"+h[0].innerHTML+"</div>")).append(a("<td/>").append("<h2>Unqualified Maps ("+h[1].childElementCount+")</h2>").attr("style","width: 50%").append("<div>"+h[1].innerHTML+"</div>"))).attr("style","width: 100%")).appendTo("body").dialog({autoOpen:!0,modal:!0,dialogClass:"agency-map-list",resizable:!1,width:"90%",height:"90%",position:{my:"center",at:"center",of:window},close:function(){a(this).dialog("destroy").remove()}})}}).fail(function(a,b){if("error"==b)return console.log("Error in AGOL API request."),"Sorry but there was an error: "+a.status+" "+a.statusText})}function c(b,c){var d=0,e=0,f=a("<li>"),g=a("<li>");return a.each(b.results,function(){var b;if(this.url.indexOf("http")>-1&&null!==this.url){var h=this.url.split("://");b=!(h[1].indexOf(":")>-1)}else b=!1;if("thumbnail/ago_downloaded.png"!=this.thumbnail&&null!==this.thumbnail&&null!==this.description&&"jquacken_EPA"!=this.owner&&b===!0){var i=this.tags.toString();e+=1,d+=1;var j,k=c+"/sharing/rest/content/items/"+this.id+"/info/"+this.thumbnail,l=("<p>"+this.description+"</p>",this.url);j=l.indexOf("http://")>-1&&l.indexOf("maps.arcgis.com")>-1?l.replace("http://","https://"):l,f.append(a("<div>").append(a("<a>",{class:"thumbhyperlink","data-tags":i,href:j,title:this.title,target:"_blank"}).append(a("<img>",{class:"thumbnailImg",src:k,alt:this.title,title:this.title})),a("<p>",{"data-toggle":"tooltip",style:"font-size:10pt",class:"ee-bootstrap-tooltip mapAppTitle ellipsis",title:this.title,html:this.title})))}else{var i=this.tags.toString();e+=1,d+=1;var j,k=c+"/sharing/rest/content/items/"+this.id+"/info/"+this.thumbnail,l=("<p>"+this.description+"</p>",this.url);j=l.indexOf("http://")>-1&&l.indexOf("maps.arcgis.com")>-1?l.replace("http://","https://"):l,g.append(a("<div>").append(a("<a>",{class:"thumbhyperlink","data-tags":i,href:j,title:this.title,target:"_blank"}).append(a("<img>",{class:"thumbnailImg",src:k,alt:this.title,title:this.title})),a("<p>",{"data-toggle":"tooltip",style:"font-size:10pt",class:"ee-bootstrap-tooltip mapAppTitle ellipsis",title:this.title,html:this.title})))}}),[f[0],g[0]]}Drupal.behaviors.agency_map_list={attach:function(c,d){var e=a(".form-field-type-url .fieldset-description");a("#url_preview",c).click(function(){var c=a("#edit-field-ee-agency-map-url-und-0-value").val(),d=e.text();a.ajax({url:Drupal.settings.basePath+"ajax_map_form_validate",data:{url:c},method:"POST",beforeSend:function(){e.text("Loading...")},success:function(c){var c=a.parseJSON(c);c.error?(e.html('<span class="field-suffix error">'+c.message+"</span>"),console.log(c.console_message)):(e.text(d),b(c.url,c.orgid))}})})}}}(jQuery);
//# sourceMappingURL=preview_maps.js.map