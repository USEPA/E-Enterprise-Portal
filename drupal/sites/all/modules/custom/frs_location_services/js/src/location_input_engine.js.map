{"version":3,"sources":["location_input_engine.js"],"names":["$","jQuery"],"mappings":"CAAA,SAAUA,KA4DPC","file":"location_input_engine.js","sourcesContent":["(function($) {\r\n\r\n  // takes zip, or city, state\r\n  // returns location data object\r\n  function lookUpLocation(location_input) {\r\n    var error_message;\r\n    var error;\r\n    var is_valid_zip = /(^\\d{5}$)|(^\\d{5}-\\d{4}$)|(^\\d{5}-\\d{5}$)/.test(location);\r\n    var location_data_return = {};\r\n    // regex for city, state code\r\n    var is_city_state = /^[\\w\\s]+,\\s*\\w{2}$/.test(location);\r\n    if (!is_city_state && !is_valid_zip) {\r\n      error_message = 'Please input a valid ZIP code or a city and state code separated by a comma (e.g., Durham, NC)';\r\n      error = true;\r\n    }\r\n    else {\r\n      $.ajax({\r\n        url: Drupal.settings.basePath + 'return_location_data',\r\n        type: 'POST',\r\n        data: {location: location},\r\n        success: function(data) {\r\n          var parsed_data = $.parseJSON(data);\r\n          var location_data = {};\r\n          if (parsed_data.name_city_state) { // zip code entered, returned city/state\r\n            location_data_return.city = parsed_data.city;\r\n            if (location_data_return.city == '') { //Unable to find data for that zip\r\n              error_message = 'The ZIP code you entered could not be found.';\r\n              error = true;\r\n            }\r\n            else {\r\n              location_data_return.state = parsed_data.state;\r\n              location_data_return.zip = parsed_data.zip;\r\n            }\r\n          }\r\n          else {\r\n            location_data_return.zip_array = parsed_data.zip_array;\r\n            if (location_data_return.zip_array.length == 0) {\r\n              error_message = 'No ZIP codes returned. Are you sure the city and state code were entered correctly? (e.g., Durham, NC)';\r\n              error = true;\r\n            }\r\n            else {\r\n              location_data_return.city = parsed_data.city;\r\n              location_data_return.state = parsed_data.state;\r\n              var zip_select = '<select id=\"city-state-lookup-zips\">';\r\n              $.each(parsed_data.zip_array, function(index, zip_code) {\r\n                zip_select = zip_select + '<option value=\"' + zip_code + '\">' + zip_code + '</option>';\r\n              });\r\n              zip_select = zip_select + '</select>';\r\n              location_data_return.zip_select = zip_select;\r\n            }\r\n          }\r\n\r\n          return location_data_return;\r\n        }\r\n\r\n      });\r\n\r\n    }\r\n  }\r\n\r\n})(jQuery);\r\n"]}