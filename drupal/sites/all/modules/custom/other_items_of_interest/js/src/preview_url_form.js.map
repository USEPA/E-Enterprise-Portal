{"version":3,"sources":["preview_url_form.js"],"names":["$","openDialog","url","iframe","append","appendTo","dialog","autoOpen","modal","dialogClass","resizable","width","height","position","my","at","of","window","close","attr","this","remove","validateAndPreviewURL","$field_description","expression","regex","RegExp","match","text","removeClass","htt","split","open","addClass","document","ready","$preview","length","$url_input","click","e","href","val","preventDefault","jQuery"],"mappings":"CAAC,SAASA,GAEN,QAASC,GAAWC,GAChB,GAAIC,GAASH,EAAE,qCAAuCE,EAAM,qFAC/CF,GAAE,eAAeI,OAAOD,GAAQE,SAAS,QAAQC,QAC1DC,UAAU,EACVC,OAAO,EACbC,YAAa,mBACPC,WAAW,EACXC,MAAO,MACPC,OAAQ,MACRC,UACIC,GAAI,SACJC,GAAI,SACJC,GAAIC,QAERC,MAAO,WACHf,EAAOgB,KAAK,MAAO,IACnBnB,EAAEoB,MAAMd,OAAO,WAAWe,YAMtC,QAASC,GAAsBpB,GAC3BqB,mBAAqBvB,EAAE,sCAEvB,IAAIwB,GAAa,kGACbC,EAAQ,GAAIC,QAAOF,EACvB,IAAItB,EAAIyB,MAAMF,GACd,CACIF,mBAAmBK,KAAK,iCAAiCC,YAAY,QACrE,IAAIC,GAAM5B,EAAI6B,MAAM,KAAK,EACF,UAAPD,EACA7B,EAAWC,GAGXe,OAAOe,KACH9B,EACA,cAGpBqB,oBAAmBK,KAAK,mDAAmDK,SAAS,SAI5FjC,EAAEkC,UAAUC,MAAM,WACd,GAAIC,GAAWpC,EAAE,yBACjB,IAAIoC,EAASC,OAAS,EAAG,CACrB,GAAIC,GAAatC,EAAE,qCACnBoC,GAASG,MAAM,SAAUC,GAErB,GAAIC,GAAOH,EAAWI,KACtBpB,GAAsBmB,GAEtBD,EAAEG,uBAOhBC","file":"preview_url_form.js","sourcesContent":["(function($) {\r\n\r\n    function openDialog(url) {\r\n        var iframe = $('<iframe class=\"modal-iframe\" src=\"' + url + '\"  class=\"modal-iframe\" marginwidth=\"0\" marginheight=\"0\" allowfullscreen></iframe>');\r\n        var dialog = $(\"<div></div>\").append(iframe).appendTo(\"body\").dialog({\r\n            autoOpen: true,\r\n            modal: true,\r\n\t\t\t\t\t\tdialogClass: 'other-items-form',                        \r\n            resizable: false,\r\n            width: \"90%\",\r\n            height: \"90%\",\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\",\r\n                of: window\r\n            },\r\n            close: function () {\r\n                iframe.attr(\"src\", \"\");\r\n                $(this).dialog(\"destroy\").remove();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    function validateAndPreviewURL(url) {\r\n        $field_description = $('#edit-field-source-url .description');\r\n        // reg ex for url with http or https\r\n        var expression = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/gi;\r\n        var regex = new RegExp(expression);\r\n        if (url.match(regex) )\r\n        {\r\n            $field_description.text('Website address for resource.').removeClass('error');\r\n            var htt = url.split(':')[0];\r\n                        if (htt == 'https') {\r\n                            openDialog(url);\r\n                        }\r\n                        else {\r\n                            window.open(\r\n                                url,\r\n                                '_blank');// <- This is what makes it open in a new window.\r\n                        }\r\n        } else {\r\n            $field_description.text('Invalid Web URL (include http or https prefix).').addClass('error');\r\n        }\r\n    }\r\n\r\n    $(document).ready(function() {\r\n        var $preview = $('#new-state-url-preview');\r\n        if ($preview.length > 0) {\r\n            var $url_input = $('#edit-field-source-url-und-0-value');\r\n            $preview.click(function (e) {\r\n                //first validate url\r\n                var href = $url_input.val();\r\n                validateAndPreviewURL(href);\r\n                // Stop screen from scrolling up\r\n                e.preventDefault();\r\n            });\r\n        }\r\n    });\r\n\r\n\r\n\r\n}(jQuery));"]}