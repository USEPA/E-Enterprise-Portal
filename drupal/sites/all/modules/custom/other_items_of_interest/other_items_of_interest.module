<?php
/**
 * Implements hook_menu().
 **/


/**
 * Implements hook_theme_registry_alter().
 */
function other_items_of_interest_theme_registry_alter(&$theme_registry)
{
    // Defined path to the current module.
    $module_path = drupal_get_path('module', 'other_items_of_interest');
    // Find all .tpl.php files in this module's folder recursively.
    $template_file_objects = drupal_find_theme_templates($theme_registry, '.tpl.php', $module_path);
    // Iterate through all found template file objects.
    foreach ($template_file_objects as $key => $template_file_object) {
        // If the template has not already been overridden by a theme.
        if (!isset($theme_registry[$key]['theme path']) || !preg_match('#/themes/#', $theme_registry[$key]['theme path'])) {
            // Alter the theme path and template elements.
            $theme_registry[$key]['theme path'] = $module_path;
            $theme_registry[$key] = array_merge($theme_registry[$key], $template_file_object);
            $theme_registry[$key]['type'] = 'module';
        }
    }
}

 function loadStateResources() {
     $state_resources = array();
     $query = new EntityFieldQuery;
     $query->entityCondition('entity_type', 'node')
         ->entityCondition('bundle', 'state_resource')
         ->propertyCondition('status', 1);

     $results = $query->execute();
     if (isset($results['node'])) {
         $nids = array_keys($results['node']);
         $state_resources = entity_load('node', $nids);
     }
    return $state_resources;
 }


function generateAreasOfInterestTable($data) {
    echo "<table id='other-areas-of-interest-table'>" .
        "<thead><tr><th>Source</th><th>Resource</th><th>Topic</th></tr></thead>" .
    "<tbody>";
    foreach ($data as $nid => $nid_data) {
        $state = $nid_data->title;
        $source = $nid_data->field_source[LANGUAGE_NONE][0]['safe_value'];
        $url = $nid_data->field_source_url[LANGUAGE_NONE][0]['safe_value'];
        $topic = $nid_data->field_topic[LANGUAGE_NONE][0]['value'];
                echo "<tr><td>$state</td>" .
                      "<td><a href='" . $url . "' target='_blank'>$source</a> <br /> $url</td>" .
                    "<td>$topic</td></tr>";

    }

    echo "</tbody> </table>";

}